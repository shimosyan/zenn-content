---
title: "ã€Jamf Proã€‘macOS ã®ãƒ†ãƒ¼ãƒã«å¿œã˜ã¦ DepNotify ã«è¡¨ç¤ºã•ã›ã‚‹ç”»åƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["mac", "apple", "jamf"]
published: false
---

## ã¯ã˜ã‚ã«

Jamf Pro ã§ Prestage Enrollment ã‚’ä½¿ã£ã¦ macOS ã®ã‚­ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’ã™ã‚‹éš›ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Šã®ç›®çš„ã¨ã—ã¦ [DepNotify](https://github.com/jamf/DEPNotify-Starter) ã‚’ä½¿ã†ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã® DepNotifyã€ä¼šç¤¾ã®ãƒ­ã‚´ãªã©å¥½ããªç”»åƒã‚’1æšè¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã™ãŒã€ä¾‹ãˆã°é»’ãƒ¡ã‚¤ãƒ³ã®ç”»åƒã®å ´åˆã§ã¯è‡ªç„¶ãªè¦‹ãŸç›®ã«ãªã‚Šã¾ã™ãŒãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã¯èƒŒæ™¯ã¨ç´›ã‚Œã¦ã—ã¾ã„è¦‹ãŸç›®ãŒæ‚ªããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ä»Šå›ã¯ã“ã®ç”»åƒã‚’ macOS ã®ãƒ†ãƒ¼ãƒã«ã‚ˆã£ã¦ç•°ãªã‚‹ç”»åƒã‚’è¡¨ç¤ºã•ã›ã‚‹ Tips ã¨ãªã‚Šã¾ã™ã€‚

## DepNotify ã¨ã¯ãªã‚“ãã‚„ã£ã¦äººã¯ï¼Ÿ

ã“ã¡ã‚‰ã‚’å‚è€ƒã—ã¦ãã ã„ã€‚

- [ã€Jamfã€‘DEPNotifyã‚’ä½¿ã£ã¦ã‚¼ãƒ­ã‚¿ãƒƒãƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã£ã½ã„ã“ã¨ã—ã¦ã¿ã‚‹ã€‚](https://qiita.com/soh19/items/b28537a71e46038934a8)
- [ãã‚‰ã‚ãã®æƒ…ã‚·ã‚¹ï¼šjamfPROã«DEP Notifyã‚’ä½¿ç”¨ã—ã¦Macã®è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’æ§‹æˆã—ã¦ã¿ãŸ](https://dev.classmethod.jp/articles/jamf_dep-notify_configuration/)

## å‰ææ¡ä»¶

æœ¬è¨˜äº‹ã¯ä»¥ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

- DepNotify.app `1.1.6`
- DepNotify.sh  `2.0.7`

## ä½œæ¥­å‰ã®æº–å‚™

Mac ã«é…å¸ƒã™ã‚‹ DepNotify ç”¨ã®ç”»åƒãŒãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã¨ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã®2ãƒ•ã‚¡ã‚¤ãƒ«å¿…è¦ã«ãªã‚Šã¾ã™ã€‚

Composer ã‚¢ãƒ—ãƒªã‚’ä½¿ã£ãŸ `.pkg` ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”¨æ„ã¯å„è‡ªã§è¡Œã£ã¦ãã ã•ã„ã€‚

## è¨­å®šæ–¹æ³•

ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã®ç”»åƒã¯é€šå¸¸é€šã‚Š `DepNotify.sh` 50è¡Œç›®è¾ºã‚Šã«ã‚ã‚‹ `BANNER_IMAGE_PATH` ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

```sh:DepNotify.sh
# Banner image can be 600px wide by 100px high. Images will be scaled to fit
# If this variable is left blank, the generic image will appear. If using custom Self
# Service branding, please see the Customized Self Service Branding area below
  BANNER_IMAGE_PATH="ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹"
```

ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã®ç”»åƒã¯ã€`DepNotify.sh` ã® 500 è¡Œç›®ãã‚‰ã„ã«ã‚ã‚‹ `# After the Apple Setup completed. Now safe to grab the current user and user ID` ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å¾Œã‚ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```sh:DepNotify.sh
# After the Apple Setup completed. Now safe to grab the current user and user ID
  CURRENT_USER=$(/usr/bin/stat -f "%Su" /dev/console)
  CURRENT_USER_ID=$(id -u $CURRENT_USER)
  echo "$(date "+%a %h %d %H:%M:%S"): Current user set to $CURRENT_USER (id: $CURRENT_USER_ID)." >> "$DEP_NOTIFY_DEBUG"

# ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã€ç”»åƒã‚’å·®ã—æ›¿ãˆã‚‹
  if [ -n "$CURRENT_USER" ]; then
    OS_THEME_CONFIG_FILE="/Users/$CURRENT_USER/Library/Preferences/.GlobalPreferences.plist"
    OS_THEME=$(/usr/libexec/PlistBuddy -c 'print :AppleInterfaceStyle' ${OS_THEME_CONFIG_FILE})
    if [ "$OS_THEME" = "Dark" ]; then
      # for Dark mode.
      echo "$(date "+%a %h %d %H:%M:%S"): Enable Dark mode." >> "$DEP_NOTIFY_DEBUG"
      BANNER_IMAGE_PATH="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹"
    fi
  fi

# Stop DEPNotify if there was already a DEPNotify window running (from a PreStage package postinstall script).
```
